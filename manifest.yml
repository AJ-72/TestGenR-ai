permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - manage:jira-configuration
    - manage:jira-project
    - storage:app
  external:
    fetch:
      backend:
        - address: https://bedrock-runtime.us-east-1.amazonaws.com
        - address: https://bedrock-runtime.us-west-2.amazonaws.com
        - address: https://bedrock-runtime.eu-west-1.amazonaws.com
        - address: https://bedrock-runtime.ap-southeast-1.amazonaws.com
  content:
    styles:
      - unsafe-inline
modules:
  jira:issuePanel:
    - key: testcase-issuePanel
      resource: AtlassianUI
      title: AiTestGenerator
      resolver:
        function: resolver
      description: testcase generator
      label: Test(GenR)cases
      icon: resource:AtlassianUI;issues.svg
      displayConditions:
        issueType: Story
  jira:projectSettingsPage:
    - key: projectSettingsPage
      resource: ProjectSettings
      resolver:
        function: projectsetting
      title: TestcaseGenerator config
  trigger:
    - key: testgenai-casegen
      function: testgen
      events:
        - avi:jira:updated:issue
  function:
    - key: testgen
      handler: testgen.run
    - key: resolver
      handler: resolver.handler
    - key: projectsetting
      handler: projectsetting.handler
resources:
  - key: AtlassianUI
    path: static/AtlassianUI/build
  - key: ProjectSettings
    path: static/ProjectSettings/build

app:
  runtime:
    name: nodejs20.x
  id: ari:cloud:ecosystem::app/4b2d5248-2e67-4154-93ff-2efa11a0c5b3
